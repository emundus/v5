var FbListPlugin=new Class({Implements:[Events,Options],options:{requireChecked:true},initialize:function(b){this.setOptions(b);this.result=true;if(typeOf(this.getList())==="null"){return}else{if(typeof this.getList().getForm==="function"){this.listform=this.getList().getForm();var a=this.listform.getElement("input[name=listid]");if(typeOf(a)==="null"){return}this.listid=a.value}else{this.listform=this.getList().container.getElement("form")}}this.watchButton()},getList:function(){var a=Fabrik.blocks["list_"+this.options.ref];if(typeOf(a)==="null"){a=Fabrik.blocks["visualization_"+this.options.ref]}return a},getRowId:function(a){if(!a.hasClass("fabrik_row")){a=a.getParent(".fabrik_row")}return a.id.split("_").getLast()},clearFilter:Function.from(),watchButton:function(){if(typeOf(this.options.name)==="null"){return}document.addEvent("click:relay(."+this.options.name+")",function(c,b){if(c.rightClick){return}c.stop();if(b.get("data-list")!==this.list.options.listRef){return}c.preventDefault();var d,g;if(c.target.getParent(".fabrik_row")){d=c.target.getParent(".fabrik_row");if(d.getElement("input[name^=ids]")){g=d.getElement("input[name^=ids]");this.listform.getElements("input[name^=ids]").set("checked",false);g.set("checked",true)}}var a=false;this.listform.getElements("input[name^=ids]").each(function(e){if(e.checked){a=true}});if(!a&&this.options.requireChecked){alert(Joomla.JText._("COM_FABRIK_PLEASE_SELECT_A_ROW"));return}var f=this.options.name.split("-");this.listform.getElement("input[name=fabrik_listplugin_name]").value=f[0];this.listform.getElement("input[name=fabrik_listplugin_renderOrder]").value=f.getLast();this.buttonAction()}.bind(this))},buttonAction:function(){this.list.submit("list.doPlugin")}});